<div class="fill container-page" ng-controller="videoCtrl">
    <!-- 1. The <iframe> (and video player) will replace this <div> tag. -->
    <div id="player"></div>

    <script>
      // 2. This code loads the IFrame Player API code asynchronously.
        var tag = document.createElement('script');

        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        // 3. This function creates an <iframe> (and YouTube player)
        //    after the API code downloads.
        var player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                videoId: 'Z3e1chwAEbY',
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        var currentTime;

        // 4. The API will call this function when the video player is ready.
        function onPlayerReady(event) {
            event.target.playVideo();
            setInterval(function() { 
                currentTime = event.target.getCurrentTime(); 
                document.getElementById('Current Time').innerHTML = 'Current Time: ' + currentTime; }, 
            100);
        }

        // 5. The API calls this function when the player's state changes.
        //    The function indicates that when playing a video (state=1),
        //    the player should play for six seconds and then stop.
        var done = false;
        /*
        function getCurrentTime(event) {
        document.getElementById('Current Time').innerHTML = event.target.getCurrentTime();
        }
        */

        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.PLAYING && done) {
              setTimeout(stopVideo, 6000);
              done = true;
            }
        }

        function stopVideo() {
            player.stopVideo();
        }

        function creatFlagButton() {
            var element = document.createElement('input');
            element.type = 'button';
            element.value = 'Go to ' + currentTime;
            element.name = currentTime;
            element.onclick = function() {
                var time = parseFloat(element.name);
                player.seekTo(time, true);
            }
            return element;
        }

        $('body').keypress(function(e) { 
            if (e.keyCode == 110) {
                var node = document.createElement("li");
                var textnode = document.createTextNode("Flag Time: " + currentTime + ' ');
                node.appendChild(textnode);
                node.appendChild(creatFlagButton());
                document.getElementById("FlagTime").appendChild(node);
            }
        });

    </script>

        <h1 id="Current Time"></h1>
        <ul id="FlagTime"></ul>
</div>